{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","onChange","value","PersonForm","addPerson","newName","updateName","newNum","updateNum","onSubmit","type","Person","name","number","deleteOnClick","onClick","Persons","persons","searchName","deleteFunction","filter","toLowerCase","startsWith","map","id","event","preventDefault","baseUrl","personService","getAll","axios","get","create","newObject","post","update","put","delete","Notification","message","className","content","App","useState","setPersons","useEffect","PersonService","then","response","data","setNewName","setSearchName","setNewNum","notification","setNotification","notify","setTimeout","console","log","target","length","some","person","window","confirm","personToUpdate","find","updateId","updatedPerson","catch","err","status","newPerson","concat","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d8891528.chunk.js","sourcesContent":["import React from \"react\"\n\nconst Filter = ({onChange, value}) => (\n    <>\n        <p>filter shown with</p>\n        <input onChange={onChange} value={value}/>\n    </>\n)\n\nexport default Filter","import React from \"react\"\n\nconst PersonForm = ({addPerson, newName, updateName, newNum, updateNum}) => (\n    <form onSubmit={addPerson}>\n        <div>\n          name: <input onChange={updateName} value={newName}/>\n          <div>number: <input onChange={updateNum} value={newNum}/></div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n)\n\nexport default PersonForm","import React from \"react\"\n\nconst Person = ({name, number, deleteOnClick}) => (\n  <>\n    <p>{name} {number}</p>\n    <button onClick={deleteOnClick}>Delete</button>\n  </>\n    \n)\n\nconst Persons = ({persons, searchName, deleteFunction}) => (\n\n  persons.filter(({name}) => (\n    name.toLowerCase().startsWith(searchName.toLowerCase())\n  ))\n  .map(({name, number, id}) => (\n    <Person key={id} name={name} number={number} \n    deleteOnClick={(event) => {\n      event.preventDefault()\n      deleteFunction(id)\n    }}\n    />\n  ))\n)\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n  }\n  \nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst _delete = (id, newObject) => {\n  return axios.delete(`${baseUrl}/${id}`, newObject)\n}\n  \n\nconst personService = { \n  getAll, \n  create, \n  update,\n  delete: _delete\n}\n\nexport default personService","import React, { useState, useEffect } from 'react'\nimport Filter from \"./components/Filter\"\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport PersonService from \"./services/persons\"\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={message.type}>\n      {message.content}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n \n  useEffect(() => {\n    PersonService\n      .getAll()\n      .then(response => (\n        setPersons(response.data)\n      ))\n  }\n  , [])\n\n  const [ newName, setNewName ] = useState('')\n  const [ searchName, setSearchName ] = useState('')\n  const [ newNum, setNewNum ] = useState('')\n  const [notification, setNotification] = useState(null)\n\n  const notify = (message, type = \"notification\") => {\n    setNotification({\n      content: message,\n      type: type\n    })\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n\n  const updateName = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  }\n\n  const updateNum = (event) => {\n    console.log(event.target.value);\n    setNewNum(event.target.value);\n  }\n\n  const updateSearchName = (event) => {\n    console.log(event.target.value);\n    setSearchName(event.target.value);\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (newName.length > 0) {\n      if (!persons.some((person) => (person.name === newName))) {\n        console.log(\"Adding\", newName, \"..\")\n        const newPerson = {\n          name: newName,\n          number: newNum\n        }\n      \n        PersonService\n          .create(newPerson)\n          .then(response => {\n            console.log(`${newName} was added to server data`)\n            setPersons(persons.concat(response.data))\n            setNewName(\"\")\n            setNewNum(\"\")\n            notify(`Added ${response.data.name}`)\n          })\n          .catch(err => {\n              console.log(\"Error!\", err)\n          })\n      }\n      else {\n        if (window.confirm(`${newName} is already added to phonebook. Replace the old number with the new one?`)) {\n          console.log(\"Confirmed\");\n          const personToUpdate = persons.find((person) => person.name === newName)\n          const updateId = personToUpdate.id\n          const updatedPerson = {\n            ...personToUpdate,\n            number: newNum\n          }\n\n          PersonService.update(updateId, updatedPerson)\n          .then((response) => {\n            console.log(\"Updated!\", response)\n            setPersons(persons.map((person) => (person.id === updateId ? response.data : person)))\n            notify(`Updated ${response.data.name}`)\n          })\n          .catch((err) => {\n            if (err.response.status === 404) {\n              notify(`Information on ${newName} has already been removed from server`, \"error\")\n              setPersons(persons.filter(person => person.id !== updateId))\n            }\n            else {\n              console.log(\"Error!\", err)\n            }\n          })\n        }\n        else {\n          console.log(\"Not updating!\");\n        }\n      }\n    }\n    console.log(persons)\n  }\n\n  const deletePerson = (id) => {\n    const person = persons.find(p => p.id === id)\n    PersonService.delete(person.id)\n    .then((response) => {\n      console.log(`Deleted \"${person.name}\"`, response)\n      setPersons(persons.filter(p => p.id !== id))\n    })\n    .catch((err) => {\n      console.log(`Error deleting \"${person.name}\"`, err)\n    })\n    \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <Filter onChange={updateSearchName} value={searchName} />\n      <h3>Add a new</h3>\n      <PersonForm addPerson={addPerson} \n        newName={newName} updateName={updateName} \n        newNum={newNum} updateNum={updateNum}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} searchName={searchName} deleteFunction={deletePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}